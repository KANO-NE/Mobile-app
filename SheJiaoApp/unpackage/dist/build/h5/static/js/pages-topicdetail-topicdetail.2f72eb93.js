(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-topicdetail-topicdetail"],{"08bc":function(t,i,e){"use strict";e.d(i,"b",(function(){return o})),e.d(i,"c",(function(){return a})),e.d(i,"a",(function(){return n}));var n={uniPopup:e("9416").default,uniPopupDialog:e("f21c").default},o=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticStyle:{"min-height":"100vh"}},[e("v-uni-view",{staticStyle:{"background-color":"#3CB371",padding:"30rpx"}},[e("v-uni-view",{staticStyle:{"font-size":"38rpx","font-weight":"700",color:"#ffffff"}},[t._v("#"+t._s(t.topicdata.title))]),e("v-uni-view",{staticStyle:{display:"flex","text-align":"left","margin-top":"30rpx","font-size":"30rpx",color:"#ffffff"}},[e("v-uni-view",{staticStyle:{flex:"1"}},[t._v(t._s(t.topicdata.reply)+" 条回复")]),e("v-uni-view",{staticStyle:{flex:"1"}},[t._v(t._s(t.topicdata.num)+" 浏览")]),e("v-uni-view",{staticStyle:{flex:"1"}}),e("v-uni-view",{staticStyle:{flex:"1","text-align":"right"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.collect.apply(void 0,arguments)}}},[t._v("+收藏")])],1),e("v-uni-view",{staticStyle:{"text-align":"left","margin-top":"30rpx","font-size":"30rpx",color:"#ffffff"}},[t._v("发布时间："+t._s(t.topicdata.time))]),e("v-uni-view",{staticStyle:{"text-align":"left","margin-top":"10rpx","font-size":"30rpx",color:"#ffffff"}},[t._v("发布者："+t._s(t.topicdata.name))])],1),e("v-uni-view",{staticClass:"box"},[0==this.topicreplydata.length?e("v-uni-view",[t._v("快来抢板凳吧！")]):t._e(),t._l(t.topicreplydata,(function(i){return e("v-uni-view",{key:i.id,staticClass:"box",staticStyle:{"margin-top":"20rpx"}},[e("v-uni-view",{staticStyle:{display:"flex"}},[e("v-uni-view",{staticStyle:{flex:"2"}},[e("img",{staticStyle:{height:"100rpx",width:"100rpx"},attrs:{src:i.userImg,alt:""}})]),e("v-uni-view",{staticStyle:{flex:"8"}},[e("v-uni-view",{staticStyle:{"margin-bottom":"10rpx","font-weight":"700","font-size":"38rpx"}},[t._v(t._s(i.userName))]),e("v-uni-view")],1)],1),e("v-uni-view",{staticStyle:{"margin-top":"20rpx"}},[t._v("留言内容："+t._s(i.content))]),e("v-uni-view",{staticStyle:{"margin-top":"20rpx"}},[e("span",{},[t._v("留言时间："+t._s(i.time||""))]),i.userId===t.user.id?e("span",{staticStyle:{"margin-left":"20rpx","text-align":"right"},nativeOn:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.handleDel(i.id)}}},[t._v("删除")]):t._e()])],1)}))],2),e("v-uni-button",{staticClass:"button",staticStyle:{position:"fixed",bottom:"0rpx",width:"95%",margin:"10rpx 20rpx"},attrs:{type:"primary"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.inputDialogToggle.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"button-text"},[t._v("评 论")])],1),e("v-uni-view",[e("uni-popup",{ref:"inputDialog",attrs:{type:"dialog"}},[e("uni-popup-dialog",{ref:"inputClose",attrs:{mode:"input",title:"输入内容",value:"",placeholder:"请输入内容"},on:{confirm:function(i){arguments[0]=i=t.$handleEvent(i),t.dialogInputConfirm.apply(void 0,arguments)}}})],1)],1),e("v-uni-view",[e("uni-popup",{ref:"alertDialog",attrs:{type:"dialog"}},[e("uni-popup-dialog",{attrs:{type:t.msgType,cancelText:"取消",confirmText:"确认",title:"删除确认",content:"您确认删除评论吗？"},on:{confirm:function(i){arguments[0]=i=t.$handleEvent(i),t.del.apply(void 0,arguments)}}})],1)],1)],1)},a=[]},3552:function(t,i,e){"use strict";e("7a82"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n={data:function(){return{user:uni.getStorageSync("xm-user"),topicdata:[],par:{},topicreplydata:{}}},onLoad:function(t){var i=t.TopicId;this.load(i),this.loadTopicReply(i)},methods:{collect:function(){var t={userId:this.user.id,topicId:this.topicdata.id};this.$request.post("/collect/add",t).then((function(t){"200"===t.code?uni.showToast({icon:"success",title:"收藏成功"}):uni.showToast({icon:"none",title:t.msg})}))},handleDel:function(t){this.topicId=t,this.$refs.alertDialog.open()},del:function(){var t=this.topicdata.id;this.$request.del("/topicreply/delete/"+this.topicId).then((function(i){"200"===i.code?(uni.showToast({icon:"success",title:"操作成功"}),uni.reLaunch({url:"/pages/topicdetail/topicdetail?TopicId="+t})):uni.showToast({icon:"none",title:i.msg})}))},favClick:function(t){this.checkList[t]=!this.checkList[t],console.log(this.checkList[t]),this.$forceUpdate()},load:function(t){var i=this;this.$request.get("/topic/selectById?id="+t).then((function(t){i.topicdata=t.data||{}}))},loadTopicReply:function(t){var i=this;this.$request.get("/topicreply/selectByTopicId?id="+t).then((function(t){i.topicreplydata=t.data||{}}))},inputDialogToggle:function(){this.$refs.inputDialog.open()},dialogInputConfirm:function(t){if(this.user.id){var i=this.topicdata.id,e={topicId:this.topicdata.id,userId:this.user.id,content:t};this.$request.post("/topicreply/add",e).then((function(t){"200"===t.code?(uni.showToast({icon:"success",title:"操作成功"}),console.log(i),uni.reLaunch({url:"/pages/topicdetail/topicdetail?TopicId="+i})):uni.showToast({icon:"none",title:t.msg})}))}else uni.showToast({icon:"none",title:"请登录后评论！"})}}};i.default=n},cc44:function(t,i,e){"use strict";e.r(i);var n=e("3552"),o=e.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(a);i["default"]=o.a},eb6f:function(t,i,e){"use strict";e.r(i);var n=e("08bc"),o=e("cc44");for(var a in o)["default"].indexOf(a)<0&&function(t){e.d(i,t,(function(){return o[t]}))}(a);var c=e("f0c5"),s=Object(c["a"])(o["default"],n["b"],n["c"],!1,null,"e3b299c2",null,!1,n["a"],void 0);i["default"]=s.exports}}]);